<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Workspace - Editor Markdown</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/javascript">
        window.MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          startup: {
            ready: () => {
              MathJax.startup.defaultReady();
              MathJax.startup.promise.then(() => {
                // Add wrapper to LaTeX blocks after rendering
                setTimeout(wrapLatexBlocks, 500);
              });
            }
          }
        };
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Menu -->
    <div class="top-menu">
        <div class="menu-title">Editor Markdown</div>
        <div class="menu-item" onclick="newDocument()">
            <i class="fas fa-file"></i> Novo
        </div>
        <div class="menu-item" onclick="loadMarkdownFile()">
            <i class="fas fa-folder-open"></i> Abrir
        </div>
        <div class="menu-item" onclick="saveMarkdown()">
            <i class="fas fa-save"></i> Salvar
        </div>
        <div class="menu-item disabled" onclick="printDocument()">
            <i class="fas fa-print"></i> Imprimir
        </div>
        <div class="menu-item" onclick="openSettings()">
            <i class="fas fa-cog"></i> Configurações
        </div>
        <div class="menu-item" onclick="exportDocument()">
            <i class="fas fa-download"></i> Exportar
        </div>
        <div class="menu-item" id="toGoBackBtn">
            <i class="fas fa-chevron-left"></i> Voltar
        </div>
    </div>

    <!-- Tabs Container -->
    <div class="tabs-container" id="tabsContainer">
        <button class="tab active" data-tab-id="0">
            <i class="fas fa-file-alt"></i>
            <span class="tab-name">Documento 1</span>
            <i class="fas fa-times tab-close" onclick="closeTab(0, event)"></i>
        </button>
        <button class="add-tab-btn" onclick="addNewTab()">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('**', '**')" title="Negrito"><img alt="Negrito" src="./assets/icons/format_bold.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('*', '*')" title="Itálico"><img alt="Itálico" src="./assets/icons/format_italic.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('~~', '~~')" title="Tachado"><img alt="Tachado" src="./assets/icons/format_strikethrough.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('# ', '')" title="Título 1"><img alt="Título 1" src="./assets/icons/format_h1.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('## ', '')" title="Título 2"><img alt="Título 2" src="./assets/icons/format_h2.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('### ', '')" title="Título 3"><img alt="Título 3" src="./assets/icons/format_h3.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('#### ', '')" title="Título 4"><img alt="Título 4" src="./assets/icons/format_h4.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('##### ', '')" title="Título 5"><img alt="Título 5" src="./assets/icons/format_h5.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('###### ', '')" title="Título 6"><img alt="Título 6" src="./assets/icons/format_h6.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('`', '`')" title="Código Inline"><img alt="Código Inline" src="./assets/icons/code.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('```\n', '\n```')" title="Bloco de Código"><img alt="Bloco de Código" src="./assets/icons/code_blocks.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('- ', '')" title="Lista não ordenada"><img alt="Lista com Marcadores" src="./assets/icons/format_list_bulleted.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('1. ', '')" title="Lista numerada"><img alt="Lista Numerada" src="./assets/icons/format_list_numbered.svg"/></button>
            <button class="toolbar-btn" onclick="insertDefinitionList()" title="Lista de definição"><img alt="Lista de Definição" src="./assets/icons/lists.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('> ', '')" title="Citação"><img alt="Citação" src="./assets/icons/format_quote.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('$', '$')" title="LaTeX Inline"><img alt="LaTeX inline" src="./assets/icons/function.svg"/></button>
            <button class="toolbar-btn" onclick="insertText('$$\n', '\n$$')" title="Bloco de LaTeX"><img alt="Bloco de LaTeX" src="./assets/icons/functions.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertTable()" title="Tabela"><img alt="Tabela" src="./assets/icons/table.svg"/></button>
            <button class="toolbar-btn" onclick="insertLink()" title="Link"><img alt="Link" src="./assets/icons/link.svg"/></button>
            <button class="toolbar-btn" onclick="insertImage()" title="Imagem"><img alt="Imagem" src="./assets/icons/image.svg"/></button>
        </div>

        <div class="toolbar-group">
            <button class="toolbar-btn" onclick="insertText('---\n', '')" title="Linha Horizontal"><img alt="Linha Horizontal" src="./assets/icons/horizontal_rule.svg"/></button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Navigation Sidebar -->
        <div class="nav-sidebar">
            <div class="nav-sidebar-header">
                <div class="nav-sidebar-title">
                    <i class="fas fa-list"></i>
                    Navegação do Documento
                </div>
                <button class="nav-toggle-btn" onclick="toggleNavSidebar()" title="Esconder navegação">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="nav-sidebar-content" id="navSidebarContent">
                <div class="nav-empty">Nenhum título encontrado</div>
            </div>
        </div>

        <!-- Editor Container -->
        <div class="editor-container">
            <button class="nav-toggle-external" onclick="toggleNavSidebar()" title="Mostrar navegação">
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="editor-panel">
                <div class="panel-header">
                    <span class="panel-title">
                        <i class="fas fa-edit"></i> EDITOR MARKDOWN
                    </span>
                </div>
                <textarea id="markdownEditor" placeholder="Digite seu conteúdo Markdown aqui...

# Exemplo de Título
**Texto em negrito** e *itálico*

## Código
```python
def hello_world():
    return 'Hello, World!'
```

## Matemática com LaTeX
Equação de Schrödinger:
$$
i\hbar\frac{\partial}{\partial t}\Psi = \hat{H}\Psi
$$

Einstein inline: $E = mc^2$

Integral definida:
$$
\int_{a}^{b} f(x) dx
$$

## Citação
> Esta é uma citação com estilo personalizado

## Tabela
| Coluna 1 | Coluna 2 | Coluna 3 |
|----------|----------|----------|
| Dado 1   | Dado 2   | Dado 3   |

---"></textarea>
            </div>

            <div class="preview-panel">
                <div class="panel-header">
                    <span class="panel-title">
                        <i class="fas fa-eye"></i> PREVIEW EM TEMPO REAL
                    </span>
                </div>
                <div id="markdownPreview"></div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-info">
            <span id="charCount">0 caracteres</span>
            <span id="wordCount">0 palavras</span>
            <span id="lineCount">1 linha</span>
        </div>
        <div class="status-actions">
            <span>Editor Markdown Avançado • Modo: Markdown + LaTeX</span>
        </div>
    </div>

    <!-- Settings Panel -->
    <div class="settings-overlay" id="settingsOverlay">
        <div class="settings-panel">
            <div class="settings-header">
                <h2 class="settings-title">Configurações</h2>
                <button class="close-settings" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Theme Settings -->
            <div class="settings-section">
                <h3 class="section-title">Tema Geral</h3>
                <div class="setting-row">
                    <div class="setting-label">Tema do Editor</div>
                    <div class="theme-buttons">
                        <button class="theme-btn active" onclick="setTheme('dark')">Dark</button>
                        <button class="theme-btn" onclick="setTheme('light')">Light</button>
                    </div>
                </div>
            </div>

            <!-- Heading Colors -->
            <div class="settings-section">
                <h3 class="section-title">Cores dos Títulos</h3>
                <div class="setting-row">
                    <div class="setting-label">H1 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h1Color" value="#019875">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H1 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h1Bg" value="#000000">
                    <input type="checkbox" id="h1BgTransparent" checked> Transparente
                </div>
                <div class="setting-row">
                    <div class="setting-label">H2 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h2Color" value="#019875">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H2 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h2Bg" value="#000000">
                    <input type="checkbox" id="h2BgTransparent" checked> Transparente
                </div>
                <div class="setting-row">
                    <div class="setting-label">H3 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h3Color" value="#019875">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H3 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h3Bg" value="#000000">
                    <input type="checkbox" id="h3BgTransparent" checked> Transparente
                </div>
                <div class="setting-row">
                    <div class="setting-label">H4 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h4Color" value="#019875">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H4 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h4Bg" value="#000000">
                    <input type="checkbox" id="h4BgTransparent" checked> Transparente
                </div>
                <div class="setting-row">
                    <div class="setting-label">H5 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h5Color" value="#019875">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H5 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h5Bg" value="#000000">
                    <input type="checkbox" id="h5BgTransparent" checked> Transparente
                </div>
                <div class="setting-row">
                    <div class="setting-label">H6 - Cor do Texto</div>
                    <input type="color" class="color-input" id="h6Color" value="#A1A1AA">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H6 - Cor de Fundo</div>
                    <input type="color" class="color-input" id="h6Bg" value="#000000">
                    <input type="checkbox" id="h6BgTransparent" checked> Transparente
                </div>
            </div>

            <!-- Code Inline -->
            <div class="settings-section">
                <h3 class="section-title">Código Inline</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor do Texto</div>
                    <input type="color" class="color-input" id="codeInlineColor" value="#3B82F6">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo</div>
                    <input type="color" class="color-input" id="codeInlineBg" value="#0D0D0D">
                </div>
            </div>

            <!-- LaTeX Inline -->
            <div class="settings-section">
                <h3 class="section-title">LaTeX Inline</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor do Texto</div>
                    <input type="color" class="color-input" id="latexInlineColor" value="#E4E4E7">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo</div>
                    <input type="color" class="color-input" id="latexInlineBg" value="#000000">
                    <input type="checkbox" id="latexInlineBgTransparent" checked> Transparente
                </div>
            </div>

            <!-- Quote Block -->
            <div class="settings-section">
                <h3 class="section-title">Bloco de Citação</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor do Texto</div>
                    <input type="color" class="color-input" id="quoteColor" value="#A1A1AA">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo</div>
                    <input type="color" class="color-input" id="quoteBg" value="#0A2720">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor da Borda</div>
                    <input type="color" class="color-input" id="quoteBorder" value="#019875">
                </div>
            </div>

            <!-- LaTeX Block -->
            <div class="settings-section">
                <h3 class="section-title">Bloco de LaTeX</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor do Texto</div>
                    <input type="color" class="color-input" id="latexBlockColor" value="#1a1a2e">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo (Azul Claro)</div>
                    <input type="color" class="color-input" id="latexBlockBg" value="#e3f2fd">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor da Borda</div>
                    <input type="color" class="color-input" id="latexBlockBorder" value="#2196F3">
                </div>
            </div>

            <!-- Code Block -->
            <div class="settings-section">
                <h3 class="section-title">Bloco de Código</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo</div>
                    <input type="color" class="color-input" id="codeBlockBg" value="#141414">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Cor da Borda</div>
                    <input type="color" class="color-input" id="codeBlockBorder" value="#019875">
                </div>
            </div>

            <!-- Table Header -->
            <div class="settings-section">
                <h3 class="section-title">Cabeçalho da Tabela</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor de Fundo</div>
                    <input type="color" class="color-input" id="tableHeaderBg" value="#019875">
                </div>
            </div>

            <!-- HR Customization -->
            <div class="settings-section">
                <h3 class="section-title">Linha Horizontal (HR)</h3>
                <div class="setting-row">
                    <div class="setting-label">Cor</div>
                    <input type="color" class="color-input" id="hrColor" value="#00ff88">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Espessura (px)</div>
                    <input type="number" class="setting-input" id="hrThickness" value="2" min="1" max="10">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Estilo</div>
                    <select class="setting-input" id="hrStyle">
                        <option value="solid">Sólida</option>
                        <option value="dashed">Tracejada</option>
                        <option value="dotted">Pontilhada</option>
                    </select>
                </div>
            </div>

            <!-- Spacing -->
            <div class="settings-section">
                <h3 class="section-title">Espaçamento</h3>
                <div class="setting-row">
                    <div class="setting-label">Horizontal (caracteres)</div>
                    <input type="number" class="setting-input" id="spacingHorizontal" value="0" min="-5" max="10" step="0.1">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Vertical (linhas)</div>
                    <input type="number" class="setting-input" id="spacingVertical" value="1.7" min="1" max="3" step="0.1">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Entre Palavras</div>
                    <input type="number" class="setting-input" id="wordSpacing" value="0" min="-5" max="20" step="1">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Margens (px)</div>
                    <input type="number" class="setting-input" id="margins" value="20" min="0" max="100" step="5">
                </div>
            </div>

            <!-- Alignment -->
            <div class="settings-section">
                <h3 class="section-title">Alinhamento</h3>
                <div class="setting-row">
                    <div class="setting-label">Alinhamento do Texto</div>
                    <select class="setting-input" id="textAlign">
                        <option value="left">Esquerda</option>
                        <option value="right">Direita</option>
                        <option value="center">Centro</option>
                        <option value="justify">Justificado</option>
                    </select>
                </div>
            </div>

            <!-- Font Family -->
            <div class="settings-section">
                <h3 class="section-title">Fonte</h3>
                <div class="setting-row">
                    <div class="setting-label">Família da Fonte</div>
                    <select class="setting-input" id="fontFamily">
                        <option value="'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif">Segoe UI</option>
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                        <option value="'Courier New', monospace">Courier New</option>
                        <option value="Calibri, sans-serif">Calibri</option>
                        <option value="Georgia, serif">Georgia</option>
                        <option value="Verdana, sans-serif">Verdana</option>
                        <option value="'Monotype Corsiva', cursive">Monotype Corsiva</option>
                        <option value="'Cambria Math', serif">Cambria Math</option>
                    </select>
                </div>
            </div>

            <!-- Font Sizes -->
            <div class="settings-section">
                <h3 class="section-title">Tamanho das Fontes</h3>
                <div class="setting-row">
                    <div class="setting-label">H1</div>
                    <input type="text" class="setting-input" id="h1Size" value="2em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H2</div>
                    <input type="text" class="setting-input" id="h2Size" value="1.6em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H3</div>
                    <input type="text" class="setting-input" id="h3Size" value="1.3em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H4</div>
                    <input type="text" class="setting-input" id="h4Size" value="1.1em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H5</div>
                    <input type="text" class="setting-input" id="h5Size" value="1em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">H6</div>
                    <input type="text" class="setting-input" id="h6Size" value="0.9em">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Parágrafo</div>
                    <input type="text" class="setting-input" id="pSize" value="16px">
                </div>
                <div class="setting-row">
                    <div class="setting-label">Citação</div>
                    <input type="text" class="setting-input" id="quoteSize" value="16px">
                </div>
            </div>

            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 30px;">
                <button class="theme-btn" onclick="resetSettings()">Restaurar Padrão</button>
                <button class="theme-btn active" onclick="applySettings()">Aplicar Configurações</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

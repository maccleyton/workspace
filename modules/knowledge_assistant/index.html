<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente Pessoal IA</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>ğŸ¤– Assistente IA</h1>
                <div class="sidebar-status">
                    <span class="status-dot"></span>
                    <span>Online - Conectado</span>
                </div>
            </div>
            
            <div class="sidebar-buttons">
                <button class="sidebar-btn active">ğŸ’¬ Chat Geral</button>
                <button class="sidebar-btn">ğŸŒ¤ï¸ Clima</button>
                <button class="sidebar-btn">ğŸ§® Calculadora</button>
                <button class="sidebar-btn">â° Timers</button>
                <button class="sidebar-btn">ğŸ” Pesquisar</button>
            </div>
            
            <div class="sidebar-footer">
                Assistente IA v1.0 - Integrado com API<br>
                Conectado ao Gemini â€¢ Pronto para usar
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="chat-header">
                <div class="chat-title">ğŸ’¬ Chat Geral</div>
                <div class="header-buttons">
                    <button class="header-btn" id="clearBtn" title="Limpar conversa">ğŸ—‘ï¸</button>
                    <button class="header-btn" id="helpBtn" title="Ajuda">â“</button>
                </div>
            </div>

            <div class="chat-container" id="chatContainer">
                <div class="welcome-message">
                    <h2>ğŸ‘‹ OlÃ¡! Sou o Knowledge Assistant</h2>
                    <p>Sou seu companheiro para estudos, projetos e pesquisas. Posso ajudar vocÃª com fÃ­sica, programaÃ§Ã£o, filosofia e muito mais. Como posso ajudÃ¡-lo hoje?</p>
                </div>
            </div>

            <div class="input-area">
                <div class="input-wrapper">
                    <textarea 
                        id="userInput" 
                        placeholder="Digite sua mensagem ou comando..."
                        rows="2"
                    ></textarea>
                    <div class="button-group">
                        <button id="voiceBtn" title="Falar">ğŸ¤</button>
                        <button id="sendBtn">ğŸ“¤</button>
                    </div>
                </div>
            </div>
            
        </main>

        <!-- Annotations Sidebar -->
        <aside class="annotations-sidebar">
            <div class="annotations-header">
                <h3>AnotaÃ§Ãµes</h3>
            </div>
            <div class="annotations-content">
                <!-- AnotaÃ§Ãµes serÃ£o carregadas aqui -->
            </div>
            <div class="annotations-footer">
                <button class="new-annotation-btn">+ Nova AnotaÃ§Ã£o</button>
            </div>
        </aside>
    </div>

    <!-- Seus scripts originais -->
    <script src="js/storage.js"></script>
    <script src="js/api.js"></script>
    <script src="js/speech.js"></script>
    <script src="js/assistant.js"></script>
    
    <!-- Novo sistema de anotaÃ§Ãµes -->
    <script src="js/annotations.js"></script>
    
    <!-- App principal integrado -->
    <script>
        // Inicializar o sistema de anotaÃ§Ãµes
        const annotationsManager = new AnnotationsManager();
        
        // Adicionar comando de anotaÃ§Ãµes ao seu sistema existente
        const originalProcessCommand = window.processCommand;
        
        window.processCommand = async function(message) {
            const msg = message.toLowerCase().trim();
            
            // Comando de anotaÃ§Ãµes
            if (msg.startsWith('anotar ') || msg === 'anotar') {
                const noteText = message.replace('anotar', '').trim();
                if (noteText) {
                    annotationsManager.createAnnotation('AnotaÃ§Ã£o RÃ¡pida', noteText);
                    return 'ğŸ“ AnotaÃ§Ã£o criada com sucesso!';
                } else {
                    return 'ğŸ“ Use: "anotar [seu texto]" para criar uma anotaÃ§Ã£o rÃ¡pida';
                }
            }
            
            // Comando ver anotaÃ§Ãµes
            if (msg === 'anotaÃ§Ãµes' || msg === 'ver anotaÃ§Ãµes') {
                const count = annotationsManager.annotations.length;
                return `ğŸ“ VocÃª tem ${count} anotaÃ§Ãµes. Use o painel lateral para visualizÃ¡-las.`;
            }
            
            // Processar outros comandos normalmente
            if (originalProcessCommand) {
                return await originalProcessCommand(message);
            }
            
            return null;
        };
        
        // Integrar com o sistema de chat existente
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar funcionalidade aos botÃµes da sidebar
            document.querySelectorAll('.sidebar-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Atualizar tÃ­tulo do chat
                    const chatTitle = document.querySelector('.chat-title');
                    if (chatTitle) {
                        chatTitle.textContent = this.textContent;
                    }
                });
            });
        });
    </script>
</body>
</html>